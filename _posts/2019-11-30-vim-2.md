---
title:  "vim: qu√© m√°s"
layout: post
date:   2019-11-30
author: jartigag
image: /assets/images/posts/vim2.png
tag:
- vim
- editor
- herramientas
mastodonReplies: https://mastodon.social/@jartigag/103228338234580314
twitterReplies: https://twitter.com/jartigag/status/1200847033260740608
---

Unos meses despu√©s de incluir Vim en mis herramientas habituales, he aprendido algunas cosas nuevas que pueden valer la pena anotar y compartir.

<p align="center">
<img src="{{site.baseurl}}/assets/images/posts/vim2.png">
</p>

## /√≠ndice:

- [Mi .vimrc ahora](#mi-vimrc-ahora)
- [Macros](#macros)
- [#vimtricks](#vimtricks)
- [#Vimium](#vimium)

## Mi .vimrc ahora

Como [cab√≠a esperar]({{site.baseurl}}/vim/#mi-vimrc), mi
[`.vimrc`](https://github.com/jartigag/dotfiles/blob/a1839e99d9ada50effba61b4125f1cecea5d927a/vim/.vimrc) ha crecido. Lo he alimentado ojeando los
dotfiles de otra gente, buscando en Stack Overflow y finalmente probando configuraciones hasta dar con lo que me hace falta en cada momento.

Aun as√≠, siguen siendo ayudas adicionales. De las que me facilitan un poco la vida cuando trabajo en local, pero que tampoco echo de menos si estoy
editando en otra m√°quina.

Entre lo que tengo ahora, destacar√≠a 3 cosas:

- Las configuraciones seg√∫n el tipo de fichero, que se establecen en `.vim/ftplugin/` y se detectan definiendo las reglas que quieras en
  `.vim/ftdetect/`. Hay que tener activado este plugin (viene por defecto con Vim):
```
" Different config for each filetype
filetype plugin on
```

- La funci√≥n para eliminar los espacios en blanco que sobran. Copi√© la idea de
  [@ekaitz_zarraga](https://github.com/ekaitz-zarraga/dotfiles/blob/34bd59d19e3a9e057c40869c89b1a4af88f04c1e/nvim/nvim/init.vim#L109):
```
" Clear trailing spaces on <F2>
function TrimWhiteSpace() "TODO: apply just on visual selection
  %s/\s*$//
  ''
:endfunction
command! -nargs=0 Tr call TrimWhiteSpace()
```

- La funci√≥n para colapsar todo el c√≥digo con `:zA` e ir despleg√°ndolo paso a paso. La encontr√© en [esta
  respuesta](https://stackoverflow.com/a/35844548):
```
function UnrolMe()
if $unrol==0
    :exe "normal zR"
    let $unrol=1
else
    :exe "normal zM"
    let $unrol=0
endif
endfunctionEjemplos
noremap zA :call UnrolMe()<CR>
```

Tambi√©n me gustan un par de *coloreados* que he a√±adido: el de [resaltar las
b√∫squedas](https://github.com/jartigag/dotfiles/blob/a1839e99d9ada50effba61b4125f1cecea5d927a/vim/.vimrc#L42) y el de la [barra horizontal a los 150
caracteres por l√≠nea](https://github.com/jartigag/dotfiles/blob/af8b564dcd09130801cde81053dd4e27bd9448fe/vim/.vim/ftplugin/markdown.vim#L8) cuando
escribo en Markdown (ampli√© de 80 a 150 porque prefiero aprovechar m√°s ancho de pantalla para esto). Dentro de un fichero `.md`, al llegar a este
l√≠mite de caracteres en el modo Insertar autom√°ticamente [salta de
l√≠nea](https://github.com/jartigag/dotfiles/blob/af8b564dcd09130801cde81053dd4e27bd9448fe/vim/.vim/ftplugin/markdown.vim#L6), pero si al pegar algo o
al editar un p√°rrafo me paso de esta longitud de l√≠nea, lo formateo con <kbd>g</kbd><kbd>q</kbd>. Con esta norma por l√≠nea consigo que mis `.md` (por
ejemplo, estos posts) tambi√©n sean legibles en texto plano. Man√≠as, supongo üòÖ O quiz√°s "decisiones de dise√±o"... Seg√∫n cu√°nto quiera justificarlo.

## Macros

Al principio entraba en el modo "grabar macro" como todos: por error al pulsar dos veces la <kbd>q</kbd> üòÇ Pero poco a poco he aprendido lo √∫til que
puede ser una macro en el momento adecuado (¬°mucho m√°s que el poderoso [<kbd>.</kbd>](https://vim.fandom.com/wiki/Repeat_last_change)!) para repetir
una serie de comandos todas las veces que haga falta. ¬°Qu√© momento ese en el que ves la ocasi√≥n, grabas la macro bien a la primera y la reutilizas
por todo el fichero a base de <kbd>@</kbd><kbd>@</kbd>!

La mejor manera que se me ocurre de explicarlo es este [caso de ejemplo](https://vim.fandom.com/wiki/Macros#Example) que dan en la wiki Vim Tips.

## #vimtricks

Por el camino he descubierto un pu√±ado de peque√±os trucos. Algunos solo son √∫tiles para ocasiones puntuales; a menos que te encuentres muchas veces
en esas situaciones, no los recordar√°s (ni falta que hace). Por ejemplo: cambiar el caracter actual entre may√∫scula/min√∫scula con
[<kbd>~</kbd>](https://mastodon.social/@jartigag/102009742929208675), intercambiar letras con <kbd>x</kbd><kbd>p</kbd> (que es *on actual char,
e**x**tract and **p**aste*), abrir en el navegador web el enlace sobre el que est√°s con
[<kbd>g</kbd><kbd>x</kbd>](https://mastodon.social/@jartigag/102249644190158736), etc.

Pero hay otras clases de atajos que s√≠ son m√°s frecuentes:

- Fijar el tama√±o del tab con [`:set tabstop=4spaces`](https://mastodon.social/@jartigag/102016755596232058) y convertir los tabs en espacios con
  [`:set retab`](https://mastodon.social/@jartigag/102016761759538196) (`IndentationError` de Python, te estoy mirando a ti)

- Crear una sesi√≥n de Vim con `:mksession mysession.vim` para almacenar el estado de lo que tienes abierto, y recuperarlo con `:source mysession.vim`
  o directamente abriendo Vim con el argumento `vim -S mysession.vim`

- Despu√©s de dividir la pantalla en ventanas (<kbd>Ctrl+W</kbd><kbd>S</kbd> ***S**plit* horizontal, <kbd>Ctrl+W</kbd><kbd>v</kbd> vertical
  y <kbd>Ctrl+W</kbd><kbd>q</kbd> para cerrar), [redimensionarlas como iguales con
  <kbd>Ctrl+W</kbd><kbd>=</kbd>](https://mastodon.social/@jartigag/102314310712913156). Si prefieres que tengan distinto tama√±o, se puede agrandar
  con <kbd>Ctrl+W</kbd><kbd>></kbd> en el eje X y con <kbd>Ctrl+W</kbd><kbd>+</kbd> en el eje Y. Tambi√©n se puede [especificar el
  tama√±o](https://mastodon.social/@jartigag/102314321804065864) num√©ricamente.

## Vimium

Me he acostumbrado tanto a moverme por Vim sin levantar los dedos que no quer√≠a tener que renunciar a ello nunca m√°s üòÇ Y
[Vimium](https://vimium.github.io/) me permite hacer justo eso en Chromium: scrollear, ir al principio o al final de la p√°gina, ir hacia atr√°s o
hacia delante en el historial, abrir cualquier enlace en esta pesta√±a o en otra... Todos los gestos b√°sicos con los que manejarse entre webs, sin
coger el rat√≥n ni buscar teclas especiales. Dir√≠a que es *casi con la mirada*: encuentras a d√≥nde quieres saltar, pulsas <kbd>f</kbd> y lo completas
con la letra que aparece donde est√°s mirando. Tambi√©n tiro de rat√≥n cuando es m√°s r√°pido as√≠, claro, pero me gusta poder recorrer Internet con las
manos sobre el teclado.

Al menos a m√≠ me resulta una forma m√°s √°gil de navegar, a√∫n m√°s en sitios habituales donde se repiten los atajos. Ahora pierdo un poco menos de
tiempo yendo a donde quiero ir... Para poder perder m√°s tiempo estando all√≠ üòÄ
